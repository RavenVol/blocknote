import React from 'react';
import BlockNote from './BlockNote';
import BgNoteImg from '../../../data/img';
import randomizer from '../../../misc/randomizer';

import '../../../styles/css/userPage.css';

const UserPage = ({handleModalOpen, blocknotes, notes, getUserData, session_key, putDataToState}) => { 
  return (
    <div>
      <div className="user">
        <div className="user__blockNotes">
          <div 
            className="bn__wrap"
            style={{backgroundColor: `grey`, borderColor: `grey`, color: 'white', fontSize: '3vw', cursor: 'pointer'}}
            onClick={() => handleModalOpen('addblocknote')}
          >
            Click to Create new BlockNote
          </div>

          {blocknotes.map((bn, index) => {
            const bn_notes = notes.filter(note => note.bn_id === bn.id);
            return (
              <div
                key={`bn${bn.id}`}
                className="bn__wrap"
                style={{
                  backgroundColor: `#${bn.bgColor}`, 
                  borderColor: `#${bn.bgColor}`,
                  width: `${50 + 3 * bn_notes.length}%`
                }}
              >
                <BlockNote 
                  bn_id={bn.id}
                  notes={bn_notes}
                  getUserData={getUserData}
                  session_key={session_key}
                />
                
                <p 
                  className="bn__title" 
                  style={{
                    transform: `rotateZ(${index % 2 === 0 ? 0 : 180}deg)`,
                  }}>
                  {bn.title}
                </p>
                
                <div className="bn__menu bnMenu">
                <button 
                    className="bnMenu__btn"
                    title="Edit BlockNote"
                    onClick={() => {putDataToState('currBn_id', bn.id); handleModalOpen('addblocknote')}}
                  >
                    <svg
                      className="bnMenu__img bnMenu__img--normal"
                      x="0px" y="0px" 
                      viewBox="0 0 1000 1000"
                    >
                      <path d="M423.2,928.6c0-6.8,0.2-13.5,0.5-20.2H212.6c-33.7,0-68.3-41.9-68.3-75.6V588.8c0-33.7,34.6-70.7,68.3-70.7h358.8h40.2H752c11.4,0,23.5,4.2,34.4,11.2c12.5-1.2,25.1-1.8,37.9-1.8c41.1,0,80.7,6.2,118,17.6V441.1h-29.9l60.5-65.3L842.3,252.6c-28.9,17.5-70.9,10.4-100.5-19.1c-29.5-29.5-36.7-71.5-19.1-100.4L599.5,10L203.4,400.8h122l91-86l5.5-5.5l116.6-116.5c22.4-22.5,58.9-22.5,81.4,0l162.7,157.7c13.7,13.7,18.9,32.5,15.9,50.2h65.8v40.3H27.1v180c34.8,8.5,61,45.4,61,89.7c0,44.3-26.2,81.2-61,89.7v184.9h328.2l0.1,0l0,0h71.7C424.5,966.9,423.2,947.9,423.2,928.6L423.2,928.6z"/>
                      <path d="M757.8,400.8c3-17.7-2.2-36.5-15.9-50.2l-122-117.1c-22.5-22.4-58.9-22.4-81.4,0l-81.4,81.3l91,86H757.8L757.8,400.8z"/>
                      <path d="M366.1,400.8h141.3l-70.6-70.5L366.1,400.8z"/>
                      <path d="M611.6,588.4c18.4-11.6,37.9-21.7,58.2-30.1h-58.2V588.4L611.6,588.4z"/>
                      <path d="M182.1,619.3v183.1c0,33.7,27.3,65.9,61,65.9h184.6c15.2-100.9,68-189.5,143.7-251v-58.9H243.1C209.4,558.3,182.1,585.6,182.1,619.3L182.1,619.3z"/>
                      <path d="M762.7,746.7c-22.4,0-40.5,18.2-40.5,40.5c0,22.4,18.2,40.5,40.5,40.5c22.4,0,40.6-18.2,40.6-40.5C803.2,764.9,785,746.7,762.7,746.7L762.7,746.7z"/>
                      <path d="M938.4,746.7h-32.8c-3.3-11.6-7.9-22.5-13.7-32.8l23.6-23.6c10.6-10.6,10.6-27.8,0-38.4l-19.2-19.2c-10.6-10.6-27.8-10.6-38.4,0l-24,24c-9.6-5.3-19.9-9.4-30.6-12.4v-32.8c0-14.9-12.1-27-27-27h-27c-14.9,0-27,12.1-27,27v32.8c-11.1,3.2-21.8,7.5-31.7,13.1l-24.7-24.7c-10.6-10.6-27.8-10.6-38.4,0l-19.2,19.2c-10.6,10.6-10.6,27.8,0,38.4l24.7,24.7c-5.5,9.9-9.9,20.5-13.1,31.7H587c-14.9,0-27,12.1-27,27v27c0,14.9,12.1,27,27,27h32.8c3.1,10.7,7.2,21,12.4,30.6l-24,24c-10.6,10.6-10.6,27.8,0,38.4l19.2,19.2c10.6,10.6,27.8,10.6,38.4,0l23.6-23.6c10.2,5.8,21.2,10.4,32.8,13.7V963c0,14.9,12.1,27,27,27h27c14.9,0,27-12.1,27-27v-32.8c11.2-3.2,21.8-7.5,31.7-13.1l23,23c10.6,10.6,27.8,10.6,38.4,0l19.2-19.2c10.6-10.6,10.6-27.8,0-38.4l-23-23c5.5-9.9,9.9-20.5,13.1-31.7h32.8c14.9,0,27-12.1,27-27v-27C965.4,758.8,953.3,746.7,938.4,746.7L938.4,746.7z M762.7,868.4c-44.8,0-81.1-36.3-81.1-81.1c0-44.8,36.3-81.1,81.1-81.1c44.8,0,81.1,36.3,81.1,81.1C843.8,832.1,807.5,868.4,762.7,868.4L762.7,868.4z"/>
                    </svg>
                  </button>
                  <button 
                    className="bnMenu__btn" 
                    type="button" 
                    title="Delete BlockNote and it's Notes"
                    onClick={() => {putDataToState('currBn_id', bn.id); handleModalOpen('delblocknote')}}
                  >
                    <svg
                      className="bnMenu__img bnMenu__img--danger"
                      x="0px" y="0px" 
                      viewBox="0 0 1000 1000"
                    >
                      <path fill="#ffffffcc" d="M879.6,136.8V10H771.1v126.8H662.7V10H554.2v126.8H445.8V10H337.3v126.8H228.9V10H120.4v126.8h0c-29.9,0-54.2,29.3-54.2,65.5v722.2c0,36.2,24.3,65.5,54.2,65.5h759.2c29.9,0,54.2-29.3,54.2-65.5V202.3C933.8,166.2,909.5,136.9,879.6,136.8z M716.9,859.1H283.1c-15,0-27.1-14.7-27.1-32.7c0-18.1,12.1-32.7,27.1-32.7h433.8c15,0,27.1,14.7,27.1,32.7C744,844.4,731.9,859.1,716.9,859.1z M716.9,662.7H283.1c-15,0-27.1-14.7-27.1-32.7c0-18.1,12.1-32.7,27.1-32.7h433.8c15,0,27.1,14.7,27.1,32.7C744,648,731.9,662.7,716.9,662.7z M716.9,466.2H283.1c-15,0-27.1-14.7-27.1-32.7c0-18.1,12.1-32.7,27.1-32.7h433.8c15,0,27.1,14.7,27.1,32.7C744,451.6,731.9,466.2,716.9,466.2z"/>
                      <path d="m 647.11338,85.147431 c 5.39614,25.608169 2.69807,45.058729 -9.43855,70.093449 -11.55376,23.68098 -21.56576,36.20303 -66.82191,83.95043 -46.21504,48.91311 -62.19665,67.39537 -79.33457,92.81552 -39.08916,57.57139 -56.22709,117.4554 -53.72643,186.97538 0.95889,26.76449 -0.19742,27.73279 -15.79359,12.12722 -11.74178,-11.9392 -25.42015,-38.31825 -31.00432,-60.08143 -6.15761,-23.8784 -4.23982,-60.26946 4.04241,-80.67891 4.04241,-9.82398 -23.8784,6.9285 -43.32895,25.8056 -40.43346,39.47456 -67.19795,99.35858 -73.16755,164.05587 -6.15762,64.31186 12.51266,130.93636 52.18464,186.20451 6.35504,8.85569 10.9709,16.56446 10.39745,17.13792 -1.54176,1.54175 -21.95121,-3.46895 -35.62018,-8.85569 -20.60687,-8.28223 -29.07712,-13.86639 -45.05873,-29.65058 l -15.21073,-15.21073 1.34434,18.8677 c 4.0424,60.26945 29.65058,118.03824 70.28146,158.28368 55.84161,55.07073 145.57362,87.23136 260.52841,93.00354 l 12.71007,0.77089 -11.35634,-12.12723 C 536.37966,943.19041 515.19933,880.22288 522.8987,821.4952 c 5.77218,-44.28785 25.80559,-89.92003 51.98722,-118.42369 l 7.8968,-8.66767 -1.34434,11.55376 c -2.69807,20.02401 -1.15631,56.41506 2.88609,75.29216 9.24113,41.7872 28.69168,76.25104 52.37266,93.20094 l 6.35504,4.62527 -1.34433,-4.81329 c -7.32334,-26.57647 -9.05311,-56.41505 -4.23983,-81.06432 1.54176,-7.69937 6.35504,-26.19103 10.59486,-41.01632 13.66898,-46.98592 14.43986,-74.13585 2.88609,-108.79713 -5.38674,-15.98161 -20.22143,-45.44416 -30.61887,-61.42577 -3.85439,-5.58416 -6.35504,-10.78288 -5.9696,-11.16832 1.92719,-1.9272 33.50497,14.82529 49.87201,26.57647 68.7397,48.91311 106.86993,139.98946 102.82753,246.27654 -2.31263,56.9979 -16.75248,113.02753 -38.31825,146.5325 l -6.74048,10.59487 16.56447,-0.5829 c 88.00224,-3.65694 153.27295,-27.1499 198.91454,-72.20862 38.70369,-38.12083 62.19665,-91.46177 72.01129,-163.28498 6.7405,-48.33026 3.8544,-125.93505 -7.314,-196.01909 l -4.0424,-25.42016 -4.62526,13.8664 c -11.16832,33.69298 -27.34735,59.49857 -49.67459,80.10544 -11.36574,10.20943 -31.00432,23.10752 -32.73409,21.18033 -0.57346,-0.38544 2.88609,-9.82399 7.69937,-20.99231 10.59487,-25.22273 20.79489,-58.7277 25.22274,-83.57439 5.0107,-28.30625 4.62526,-74.52129 -0.9589,-100.70292 -17.51396,-82.6249 -71.61639,-146.3633 -154.41987,-181.98348 -9.05311,-3.85439 -17.13793,-7.12592 -17.71138,-7.12592 -0.57346,0 2.11521,5.38675 6.16702,11.9392 29.46256,49.67459 31.19233,96.08706 4.23042,125.35219 -17.13792,18.67968 -43.13153,21.95121 -71.05234,9.05311 -29.84799,-13.66897 -42.74609,-39.08912 -36.20303,-71.05233 3.08351,-14.25183 5.58416,-20.22143 26.76449,-59.88402 44.48526,-83.95043 42.17263,-139.98946 -7.12592,-176.76596 -10.78288,-7.896792 -32.34865,-19.065114 -43.32895,-22.52466 -4.42785,-1.353736 -4.61587,-1.165718 -3.27153,5.001301 z"/>
                    </svg>
                  </button>
                </div>
                
                <div className={index % 2 === 0 ? "bgImgWrap bgImgWrap--right" : "bgImgWrap bgImgWrap--left"}>
                  <svg 
                    className="bgImg"
                    x="0px" y="0px" 
                    viewBox="0 0 1000 1000" 
                    style={{
                      top: `${randomizer(-10, 20)}%`,
                      left: `${index % 2 === 0 ? randomizer(50, 70) : 0}%`,
                      transform: `rotateZ(${randomizer(-35, 35)}deg)`,
                      width: `${randomizer(30, 40)}vw`,
                      height: `${randomizer(30, 40)}vw`,
                    }}
                  >
                    <BgNoteImg />
                  </svg>
                </div>
              </div>
            );
          })}
        </div>
      </div>
    </div>
  );
}

export default UserPage;

